> 状态检查点（2026-02-24）：Stage 1~3C 完成；Stage 3D 进行中；Stage 4 未开始。  
> 本文件是项目阶段状态的唯一口径。

## Stage 1：工程骨架与工具链
**目标**：完成 CMake 化、静态库目标、示例目标、shader 构建链路。  
**验收标准**：可配置、可编译、可链接、可运行占位示例。  
**测试**：`cmake --build` 与基础测试二进制可执行。  
**状态**：已完成。

## Stage 2：核心引擎基础设施
**目标**：完成 Metal 上下文、缓冲分配、配置加载、日志、数学工具、场景基础上传。  
**验收标准**：可初始化设备，可上传几何数据，核心模块有单元测试。  
**测试**：core/rendering/scene 相关单元测试。  
**状态**：已完成。

## Stage 3：硬件 RT 主线
> Stage 3 明确为“硬件优先”，软件/MPS 回退延后到 Stage 4。

### Stage 3A：硬件 RT 计算路径打通
**目标**：完成 BLAS/TLAS 构建与 compute kernel 调度。  
**验收标准**：可输出非黑屏诊断图；能力检测与错误提示明确。  
**测试**：加速结构构建与调度的能力门控测试。  
**状态**：已完成。

### Stage 3B：硬件着色基础对齐
**目标**：对齐 Apple 参考路径，完成 Cornell 基础光照与材质流程。  
**验收标准**：Cornell 可稳定渲染；材质与资源布局可用。  
**测试**：硬件冒烟 + 资源打包测试。  
**状态**：已完成。

### Stage 3C：On-Screen 示例
**目标**：提供窗口化示例，验证交互式运行链路。  
**验收标准**：模式切换、分辨率、截图可用。  
**测试**：人工 checklist + CLI hash 对照。  
**当前补充（代码已体现）**：
- 显示方向已修正为与离屏输出一致（不再倒置）。
- 已提供实时 FPS 覆盖层，便于交互性能观察。
**状态**：已完成。

### Stage 3D：扩展着色与性能完善
**目标**：补齐反射/折射/运动模糊等效果，并修正交互路径性能瓶颈。  
**当前事实（代码已体现）**：
- 已有：路径追踪主线闭环（直接光 MIS、漫反射/镜面散射、折射/全反射、Russian Roulette）。
- 已有：GGX 高光采样与 PDF 对齐修正，减少能量分布偏差。
- 已有：默认硬件最大弹射为 `6`（配置可覆盖）。
- 已有：每帧多采样已接入，当前默认 `samplesPerPixel=4`，并与跨帧累积协同工作。
- 已有：On-Screen 路径补齐显示方向修正与实时 FPS 叠层。
- 已有：Cornell 构图参数进入持续对齐阶段（立方体/双球/Mario/灯光均可参数化迭代）。
- 未完成：Cornell `1024x768` 的 `frames=1/4/16` hash 基线需按当前主线重采并同步 CTest。
- 未完成：折射材质仍为基础模型，尚未引入体吸收（Beer-Lambert）、粗糙透射与色散。

**验收标准**：
- PBR 路径追踪主线稳定（含镜面/折射材质）。
- 交互模式无默认 CPU 读回阻塞，On-Screen 支持实时 FPS 可视化。
- 当前主线 hash/截图基线完成重采并进入测试流程。

**测试**：
- 扩展图像回归（hash 或 image diff）。
- 参数开关（折射、累积、调试模式）组合测试。

**状态**：进行中。

## Stage 4：软件/MPS 回退恢复
**目标**：在硬件路径稳定后恢复软件/MPS 回退，并与硬件路径共享场景/材质布局。  
**前置条件**：Stage 3D 完成并产出稳定基线。  
**状态**：未开始。
